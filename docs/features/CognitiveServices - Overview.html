<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/SynapseML/blog/rss.xml" title="Synapse ML Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/SynapseML/blog/atom.xml" title="Synapse ML Blog Atom Feed"><title data-react-helmet="true">CognitiveServices - Overview | Synapse ML</title><meta data-react-helmet="true" property="og:url" content="https://synapseml.github.io/SynapseML/docs/features/CognitiveServices - Overview"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="0.9.1"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-0.9.1"><meta data-react-helmet="true" property="og:title" content="CognitiveServices - Overview | Synapse ML"><meta data-react-helmet="true" name="description" content="Azure Cognitive Services are a suite of APIs, SDKs, and services available to help developers build intelligent applications without having direct AI or data science skills or knowledge by enabling developers to easily add cognitive features into their applications. The goal of Azure Cognitive Services is to help developers create applications that can see, hear, speak, understand, and even begin to reason. The catalog of services within Azure Cognitive Services can be categorized into five main pillars - Vision, Speech, Language, Web Search, and Decision."><meta data-react-helmet="true" property="og:description" content="Azure Cognitive Services are a suite of APIs, SDKs, and services available to help developers build intelligent applications without having direct AI or data science skills or knowledge by enabling developers to easily add cognitive features into their applications. The goal of Azure Cognitive Services is to help developers create applications that can see, hear, speak, understand, and even begin to reason. The catalog of services within Azure Cognitive Services can be categorized into five main pillars - Vision, Speech, Language, Web Search, and Decision."><link data-react-helmet="true" rel="shortcut icon" href="/SynapseML/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://synapseml.github.io/SynapseML/docs/features/CognitiveServices - Overview"><link data-react-helmet="true" rel="alternate" href="https://synapseml.github.io/SynapseML/docs/features/CognitiveServices - Overview" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://synapseml.github.io/SynapseML/docs/features/CognitiveServices - Overview" hreflang="x-default"><link rel="stylesheet" href="/SynapseML/assets/css/styles.128ff64f.css">
<link rel="preload" href="/SynapseML/assets/js/runtime~main.dc74e8c4.js" as="script">
<link rel="preload" href="/SynapseML/assets/js/main.1181f347.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/SynapseML/"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">SynapseML</b></a><a class="navbar__item navbar__link" href="/SynapseML/docs/about">Docs</a><a class="navbar__item navbar__link" href="/SynapseML/blog">Blog</a><a class="navbar__item navbar__link" href="/SynapseML/videos">Videos</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/SynapseML/docs/about">0.9.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/SynapseML/docs/next/features/CognitiveServices - Overview">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/SynapseML/docs/features/CognitiveServices - Overview">0.9.1</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/SynapseML/docs/features/CognitiveServices - Overview" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Developer Docs</a><ul class="dropdown__menu"><li><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Scala<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://github.com/microsoft/SynapseML" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle displayOnlyInLargeViewport_Jf15 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_2iFN">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/SynapseML/"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/SynapseML/img/logo.svg" alt="SynapseML Logo" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">SynapseML</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/SynapseML/docs/about">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/SynapseML/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/SynapseML/videos">Videos</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/SynapseML/docs/next/features/CognitiveServices - Overview">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/SynapseML/docs/features/CognitiveServices - Overview">0.9.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/SynapseML/docs/features/CognitiveServices - Overview" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Developer Docs</a><ul class="menu__list"><li class="menu__list-item"><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/index.html" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/index.html" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Scala<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="menu__list-item"><a href="https://github.com/microsoft/SynapseML" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_3zOJ"><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu menu--responsive thin-scrollbar menu_1Iah menuWithAnnouncementBar_3acx" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1woU" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/SynapseML/docs/about">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/getting_started/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/getting_started/first_example">First Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/getting_started/first_model">First Model</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Features</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/SynapseML/docs/features/CognitiveServices - Overview">CognitiveServices - Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">HTTP on Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/http/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/http/HttpOnSpark - Working with Arbitrary Web APIs">HttpOnSpark - Working with Arbitrary Web APIs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">LightGBM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/lightgbm/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/lightgbm/LightGBM - Overview">LightGBM - Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Model Interpretability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/model_interpretability/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/model_interpretability/ModelInterpretability - Snow Leopard Detection">ModelInterpretability - Snow Leopard Detection</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ONNX</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/onnx/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/onnx/ONNX - Inference on Spark">ONNX - Inference on Spark</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Spark Serving</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/spark_serving/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/spark_serving/SparkServing - Deploying a Classifier">SparkServing - Deploying a Classifier</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Vowpal Wabbit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/vw/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/features/vw/Vowpal Wabbit - Overview">Vowpal Wabbit - Overview</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/AzureSearchIndex - Met Artworks">AzureSearchIndex - Met Artworks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/ConditionalKNN - Exploring Art Across Cultures">ConditionalKNN - Exploring Art Across Cultures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/CyberML - Anomalous Access Detection">CyberML - Anomalous Access Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/HyperParameterTuning - Fighting Breast Cancer">HyperParameterTuning - Fighting Breast Cancer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/OpenCV - Pipeline Image Transformations">OpenCV - Pipeline Image Transformations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Classification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/classification/Classification - Adult Census with Vowpal Wabbit">Classification - Adult Census with Vowpal Wabbit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/classification/Classification - Adult Census">Classification - Adult Census</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/classification/Classification - Before and After SynapseML">Classification - Before and After SynapseML</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/classification/Classification - Twitter Sentiment with Vowpal Wabbit">Classification - Twitter Sentiment with Vowpal Wabbit</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Cognitive Services</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/cognitive_services/CognitiveServices - Celebrity Quote Analysis">CognitiveServices - Celebrity Quote Analysis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/cognitive_services/CognitiveServices - Predictive Maintenance">CognitiveServices - Predictive Maintenance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Deep Learning</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/deep_learning/DeepLearning - BiLSTM Medical Entity Extraction">DeepLearning - BiLSTM Medical Entity Extraction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/deep_learning/DeepLearning - CIFAR10 Convolutional Network">DeepLearning - CIFAR10 Convolutional Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/deep_learning/DeepLearning - Flower Image Classification">DeepLearning - Flower Image Classification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/deep_learning/DeepLearning - Transfer Learning">DeepLearning - Transfer Learning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Model Interpretability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/model_interpretability/Interpretability - Image Explainers">Interpretability - Image Explainers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/model_interpretability/Interpretability - Tabular SHAP explainer">Interpretability - Tabular SHAP explainer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/model_interpretability/Interpretability - Text Explainers">Interpretability - Text Explainers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Regression</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/regression/Regression - Auto Imports">Regression - Auto Imports</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/regression/Regression - Flight Delays with DataCleaning">Regression - Flight Delays with DataCleaning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/regression/Regression - Flight Delays">Regression - Flight Delays</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/regression/Regression - Vowpal Wabbit vs. LightGBM vs. Linear Regressor">Regression - Vowpal Wabbit vs. LightGBM vs. Linear Regressor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Text Analytics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/text_analytics/TextAnalytics - Amazon Book Reviews with Word2Vec">TextAnalytics - Amazon Book Reviews with Word2Vec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/examples/text_analytics/TextAnalytics - Amazon Book Reviews">TextAnalytics - Amazon Book Reviews</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Transformers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/transformers/transformers_cognitive">Cognitive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/transformers/transformers_core">Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/transformers/transformers_opencv">OpenCV</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/transformers/transformers_vw">Vowpal Wabbit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/transformers/transformers_deep_learning">Deep Learning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Estimators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/estimators/estimators_core">Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/estimators/estimators_lightgbm">LightGBM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/documentation/estimators/estimators_vw">Vowpal Wabbit</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/reference/developer-readme">Build System Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/reference/contributing_guide">Contributing Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/reference/docker">Docker Image</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/SynapseML/docs/reference/R-setup">R setup</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><span class="badge badge--secondary">Version: 0.9.1</span><div class="markdown"><img width="200" src="https://mmlspark.blob.core.windows.net/graphics/Readme/cog_services_on_spark_2.svg"><header><h1 class="h1Heading_2x3C">Cognitive Services</h1></header><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/" target="_blank" rel="noopener noreferrer">Azure Cognitive Services</a> are a suite of APIs, SDKs, and services available to help developers build intelligent applications without having direct AI or data science skills or knowledge by enabling developers to easily add cognitive features into their applications. The goal of Azure Cognitive Services is to help developers create applications that can see, hear, speak, understand, and even begin to reason. The catalog of services within Azure Cognitive Services can be categorized into five main pillars - Vision, Speech, Language, Web Search, and Decision.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="usage"></a>Usage<a class="hash-link" href="#usage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="vision"></a>Vision<a class="hash-link" href="#vision" title="Direct link to heading">#</a></h3><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/computer-vision/" target="_blank" rel="noopener noreferrer"><strong>Computer Vision</strong></a></p><ul><li>Describe: provides description of an image in human readable language (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DescribeImage.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DescribeImage" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze (color, image type, face, adult/racy content): analyzes visual features of an image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeImage.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeImage" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>OCR: reads text from an image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/OCR.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.OCR" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Recognize Text: reads text from an image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/RecognizeText.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.RecognizeText" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Thumbnail: generates a thumbnail of user-specified size from the image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/GenerateThumbnails.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.GenerateThumbnails" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Recognize domain-specific content: recognizes domain-specific content (celebrity, landmark) (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/RecognizeDomainSpecificContent.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.RecognizeDomainSpecificContent" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Tag: identifies list of words that are relevant to the in0put image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/TagImage.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.TagImage" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/face/" target="_blank" rel="noopener noreferrer"><strong>Face</strong></a></p><ul><li>Detect: detects human faces in an image (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DetectFace.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DetectFace" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Verify: verifies whether two faces belong to a same person, or a face belongs to a person (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/VerifyFaces.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.VerifyFaces" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Identify: finds the closest matches of the specific query person face from a person group (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/IdentifyFaces.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.IdentifyFaces" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Find similar: finds similar faces to the query face in a face list (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/FindSimilarFace.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.FindSimilarFace" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Group: divides a group of faces into disjoint groups based on similarity (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/GroupFaces.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.GroupFaces" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="speech"></a>Speech<a class="hash-link" href="#speech" title="Direct link to heading">#</a></h3><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/speech-services/" target="_blank" rel="noopener noreferrer"><strong>Speech Services</strong></a></p><ul><li>Speech-to-text: transcribes audio streams (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/SpeechToText.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.SpeechToText" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="language"></a>Language<a class="hash-link" href="#language" title="Direct link to heading">#</a></h3><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/text-analytics/" target="_blank" rel="noopener noreferrer"><strong>Text Analytics</strong></a></p><ul><li>Language detection: detects language of the input text (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/LanguageDetector.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.LanguageDetector" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Key phrase extraction: identifies the key talking points in the input text (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/KeyPhraseExtractor.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.KeyPhraseExtractor" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Named entity recognition: identifies known entities and general named entities in the input text (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/NER.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.NER" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Sentiment analysis: returns a score betwee 0 and 1 indicating the sentiment in the input text (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/TextSentiment.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.TextSentiment" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/translator/" target="_blank" rel="noopener noreferrer"><strong>Translator</strong></a></p><ul><li>Translate: Translates text. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/Translate.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.Translate" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Transliterate: Converts text in one language from one script to another script. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/Transliterate.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.Transliterate" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Detect: Identifies the language of a piece of text. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/Detect.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.Detect" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>BreakSentence: Identifies the positioning of sentence boundaries in a piece of text. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/BreakSentence.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.BreakSentence" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Dictionary Lookup: Provides alternative translations for a word and a small number of idiomatic phrases. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DictionaryLookup.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DictionaryLookup" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Dictionary Examples: Provides examples that show how terms in the dictionary are used in context. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DictionaryExamples.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DictionaryExamples" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Document Translation: Translates documents across all supported languages and dialects while preserving document structure and data format. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DocumentTranslator.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DocumentTranslator" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="azure-form-recognizer"></a>Azure Form Recognizer<a class="hash-link" href="#azure-form-recognizer" title="Direct link to heading">#</a></h3><p><a href="https://azure.microsoft.com/en-us/services/form-recognizer/" target="_blank" rel="noopener noreferrer"><strong>Form Recognizer</strong></a></p><ul><li>Analyze Layout: Extract text and layout information from a given document. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeLayout.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeLayout" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze Receipts: Detects and extracts data from receipts using optical character recognition (OCR) and our receipt model, enabling you to easily extract structured data from receipts such as merchant name, merchant phone number, transaction date, transaction total, and more. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeReceipts.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeReceipts" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze Business Cards: Detects and extracts data from business cards using optical character recognition (OCR) and our business card model, enabling you to easily extract structured data from business cards such as contact names, company names, phone numbers, emails, and more. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeBusinessCards.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeBusinessCards" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze Invoices: Detects and extracts data from invoices using optical character recognition (OCR) and our invoice understanding deep learning models, enabling you to easily extract structured data from invoices such as customer, vendor, invoice ID, invoice due date, total, invoice amount due, tax amount, ship to, bill to, line items and more. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeInvoices.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeInvoices" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze ID Documents: Detects and extracts data from identification documents using optical character recognition (OCR) and our ID document model, enabling you to easily extract structured data from ID documents such as first name, last name, date of birth, document number, and more. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeIDDocuments.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeIDDocuments" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Analyze Custom Form: Extracts information from forms (PDFs and images) into structured data based on a model created from a set of representative training forms. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/AnalyzeCustomModel.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AnalyzeCustomModel" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Get Custom Model: Get detailed information about a custom model. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/GetCustomModel.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/ListCustomModels.html" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>List Custom Models: Get information about all custom models. (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/ListCustomModels.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.ListCustomModels" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="decision"></a>Decision<a class="hash-link" href="#decision" title="Direct link to heading">#</a></h3><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/anomaly-detector/" target="_blank" rel="noopener noreferrer"><strong>Anomaly Detector</strong></a></p><ul><li>Anomaly status of latest point: generates a model using preceding points and determines whether the latest point is anomalous (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DetectLastAnomaly.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DetectLastAnomaly" target="_blank" rel="noopener noreferrer">Python</a>)</li><li>Find anomalies: generates a model using an entire series and finds anomalies in the series (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/DetectAnomalies.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.DetectAnomalies" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="search"></a>Search<a class="hash-link" href="#search" title="Direct link to heading">#</a></h3><ul><li><a href="https://azure.microsoft.com/en-us/services/cognitive-services/bing-image-search-api/" target="_blank" rel="noopener noreferrer">Bing Image search</a> (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/com/microsoft/azure/synapse/ml/cognitive/BingImageSearch.html" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.BingImageSearch" target="_blank" rel="noopener noreferrer">Python</a>)</li><li><a href="https://docs.microsoft.com/en-us/azure/search/search-what-is-azure-search" target="_blank" rel="noopener noreferrer">Azure Cognitive search</a> (<a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/index.html#com.microsoft.azure.synapse.ml.cognitive.AzureSearchWriter$" target="_blank" rel="noopener noreferrer">Scala</a>, <a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/synapse.ml.cognitive.html#module-synapse.ml.cognitive.AzureSearchWriter" target="_blank" rel="noopener noreferrer">Python</a>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ol><li>Follow the steps in <a href="https://docs.microsoft.com/en-us/azure/cognitive-services/big-data/getting-started" target="_blank" rel="noopener noreferrer">Getting started</a> to set up your Azure Databricks and Cognitive Services environment. This tutorial shows you how to install SynapseML and how to create your Spark cluster in Databricks.</li><li>After you create a new notebook in Azure Databricks, copy the <strong>Shared code</strong> below and paste into a new cell in your notebook.</li><li>Choose a service sample, below, and copy paste it into a second new cell in your notebook.</li><li>Replace any of the service subscription key placeholders with your own key.</li><li>Choose the run button (triangle icon) in the upper right corner of the cell, then select <strong>Run Cell</strong>.</li><li>View results in a table below the cell.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="shared-code"></a>Shared code<a class="hash-link" href="#shared-code" title="Direct link to heading">#</a></h2><p>To get started, we&#x27;ll need to add this code to the project:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">functions </span><span class="token keyword">import</span><span class="token plain"> udf</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> col</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">io</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">http </span><span class="token keyword">import</span><span class="token plain"> HTTPTransformer</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> http_udf</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> requests </span><span class="token keyword">import</span><span class="token plain"> Request</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">functions </span><span class="token keyword">import</span><span class="token plain"> lit</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml </span><span class="token keyword">import</span><span class="token plain"> PipelineModel</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">functions </span><span class="token keyword">import</span><span class="token plain"> col</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> os</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;AZURE_SERVICE&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Microsoft.ProjectArcadia&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql </span><span class="token keyword">import</span><span class="token plain"> SparkSession</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    spark </span><span class="token operator">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">builder</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword">from</span><span class="token plain"> notebookutils</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">mssparkutils</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">credentials </span><span class="token keyword">import</span><span class="token plain"> getSecret</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;ANOMALY_API_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> getSecret</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-keys&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;anomaly-api-key&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;TEXT_API_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> getSecret</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-keys&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-cs-key&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;BING_IMAGE_SEARCH_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> getSecret</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-keys&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-bing-search-key&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;VISION_API_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> getSecret</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-keys&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-cs-key&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;AZURE_SEARCH_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> getSecret</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-keys&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;azure-search-key&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> synapse</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">ml</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">cognitive </span><span class="token keyword">import</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># A general Cognitive Services key for Text Analytics, Computer Vision and Form Recognizer (or use separate keys that belong to each service)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">service_key </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;COGNITIVE_SERVICE_KEY&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># A Bing Search v7 subscription key</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">bing_search_key </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;BING_IMAGE_SEARCH_KEY&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># An Anomaly Dectector subscription key</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">anomaly_key </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;ANOMALY_API_KEY&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># A Translator subscription key</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">translator_key </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;TRANSLATOR_KEY&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="text-analytics-sample"></a>Text Analytics sample<a class="hash-link" href="#text-analytics-sample" title="Direct link to heading">#</a></h2><p>The <a href="https://azure.microsoft.com/en-us/services/cognitive-services/text-analytics/" target="_blank" rel="noopener noreferrer">Text Analytics</a> service provides several algorithms for extracting intelligent insights from text. For example, we can find the sentiment of given input text. The service will return a score between 0.0 and 1.0 where low scores indicate negative sentiment and high score indicates positive sentiment.  This sample uses three simple sentences and returns the sentiment for each.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe that&#x27;s tied to it&#x27;s column names</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;I am so happy today, its sunny!&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;en-US&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;I am frustrated by this rush hour traffic&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;en-US&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;The cognitive services on spark aint bad&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;en-US&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;language&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Text Analytics service with options</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">sentiment </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">TextSentiment</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setTextCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">service_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;sentiment&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setErrorCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;error&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">             </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLanguageCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;language&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of your text query in a table format</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">sentiment</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;sentiment&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token number" style="color:rgb(174, 129, 255)">0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">getItem</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;sentiment&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">alias</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;sentiment&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="translator-sample"></a>Translator sample<a class="hash-link" href="#translator-sample" title="Direct link to heading">#</a></h2><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/translator/" target="_blank" rel="noopener noreferrer">Translator</a> is a cloud-based machine translation service and is part of the Azure Cognitive Services family of cognitive APIs used to build intelligent apps. Translator is easy to integrate in your applications, websites, tools, and solutions. It allows you to add multi-language user experiences in 90 languages and dialects and can be used for text translation with any operating system. In this sample, we do a simple text translation by providing the sentences you want to translate and target languages you want to translate to.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">functions </span><span class="token keyword">import</span><span class="token plain"> col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> flatten</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe including sentences you want to translate</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Hello, what is your name?&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Bye&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Translator service with options</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">translate </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">Translate</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">translator_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setTextCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setToLanguage</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;zh-Hans&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of the translation.</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">translate</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">withColumn</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> flatten</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation.translations&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">withColumn</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation.text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;translation&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="form-recognizer-sample"></a>Form Recognizer sample<a class="hash-link" href="#form-recognizer-sample" title="Direct link to heading">#</a></h2><p><a href="https://azure.microsoft.com/en-us/services/form-recognizer/" target="_blank" rel="noopener noreferrer">Form Recognizer</a> is a part of Azure Applied AI Services that lets you build automated data processing software using machine learning technology. Identify and extract text, key/value pairs, selection marks, tables, and structure from your documentsâ€”the service outputs structured data that includes the relationships in the original file, bounding boxes, confidence and more. In this sample, we analyze a business card image and extract its information into structured data.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token keyword">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">functions </span><span class="token keyword">import</span><span class="token plain"> col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> explode</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe containing the source files</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">imageDf </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://mmlspark.blob.core.windows.net/datasets/FormRecognizer/business_card.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;source&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Form Recognizer service</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">analyzeBusinessCards </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">AnalyzeBusinessCards</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">service_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setImageUrlCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;source&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;businessCards&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of recognition.</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">analyzeBusinessCards</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">imageDf</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">withColumn</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;documents&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> explode</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;businessCards.analyzeResult.documentResults.fields&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;source&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;documents&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="computer-vision-sample"></a>Computer Vision sample<a class="hash-link" href="#computer-vision-sample" title="Direct link to heading">#</a></h2><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/computer-vision/" target="_blank" rel="noopener noreferrer">Computer Vision</a> analyzes images to identify structure such as faces, objects, and natural-language descriptions. In this sample, we tag a list of images. Tags are one-word descriptions of things in the image like recognizable objects, people, scenery, and actions.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe with the image URLs</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/objects.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/dog.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://raw.githubusercontent.com/Azure-Samples/cognitive-services-sample-data-files/master/ComputerVision/Images/house.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;image&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Computer Vision service. Analyze Image extracts infortmation from/about the images.</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">analysis </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">AnalyzeImage</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">service_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setVisualFeatures</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Categories&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Color&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Description&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Faces&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Objects&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Tags&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;analysis_results&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setImageUrlCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;image&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setErrorCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;error&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of what you wanted to pull out of the images.</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">analysis</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;image&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;analysis_results.description.tags&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="bing-image-search-sample"></a>Bing Image Search sample<a class="hash-link" href="#bing-image-search-sample" title="Direct link to heading">#</a></h2><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/bing-image-search-api/" target="_blank" rel="noopener noreferrer">Bing Image Search</a> searches the web to retrieve images related to a user&#x27;s natural language query. In this sample, we use a text query that looks for images with quotes. It returns a list of image URLs that contain photos related to our query.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Number of images Bing will return per query</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">imgsPerBatch </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">10</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># A list of offsets, used to page into the search results</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">offsets </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">i</span><span class="token operator">*</span><span class="token plain">imgsPerBatch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"> </span><span class="token keyword">for</span><span class="token plain"> i </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(174, 129, 255)">range</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token number" style="color:rgb(174, 129, 255)">100</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Since web content is our data, we create a dataframe with options on that data: offsets</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">bingParameters </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">offsets</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;offset&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Bing Image Search service with our text query</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">bingSearch </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">BingImageSearch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">bing_search_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOffsetCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;offset&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setQuery</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Martin Luther King Jr. quotes&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setCount</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">imgsPerBatch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;images&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Transformer that extracts and flattens the richly structured output of Bing Image Search into a simple URL column</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">getUrls </span><span class="token operator">=</span><span class="token plain"> BingImageSearch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">getUrlTransformer</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;images&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># This displays the full results returned, uncomment to use</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># display(bingSearch.transform(bingParameters))</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Since we have two services, they are put into a pipeline</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">pipeline </span><span class="token operator">=</span><span class="token plain"> PipelineModel</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">stages</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain">bingSearch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> getUrls</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of your search: image URLs</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">bingParameters</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="speech-to-text-sample"></a>Speech-to-Text sample<a class="hash-link" href="#speech-to-text-sample" title="Direct link to heading">#</a></h2><p>The <a href="https://azure.microsoft.com/en-us/services/cognitive-services/speech-services/" target="_blank" rel="noopener noreferrer">Speech-to-text</a> service converts streams or files of spoken audio to text. In this sample, we transcribe one audio file.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe with our audio URLs, tied to the column called &quot;url&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://mmlspark.blob.core.windows.net/datasets/Speech/audio2.wav&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Speech-to-text service to translate the audio into text</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">speech_to_text </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">SpeechToTextSDK</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">service_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setAudioDataCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLanguage</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;en-US&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setProfanity</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Masked&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the results of the translation</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">speech_to_text</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;text.DisplayText&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="anomaly-detector-sample"></a>Anomaly Detector sample<a class="hash-link" href="#anomaly-detector-sample" title="Direct link to heading">#</a></h2><p><a href="https://azure.microsoft.com/en-us/services/cognitive-services/anomaly-detector/" target="_blank" rel="noopener noreferrer">Anomaly Detector</a> is great for detecting irregularities in your time series data. In this sample, we use the service to find anomalies in the entire time series.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe with the point data that Anomaly Detector requires</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-01-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">826.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-02-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">799.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-03-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">890.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-04-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">900.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-05-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">766.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-06-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">805.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-07-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">821.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-08-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">20000.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-09-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">883.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-10-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">898.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-11-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">957.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1972-12-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">924.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1973-01-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">881.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1973-02-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">837.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1973-03-01T00:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(174, 129, 255)">9000.0</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;timestamp&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;value&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">withColumn</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;group&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> lit</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;series1&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Run the Anomaly Detector service to look for irregular data</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">anamoly_detector </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">SimpleDetectAnomalies</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">anomaly_key</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setTimestampCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;timestamp&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setValueCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;value&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;anomalies&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setGroupbyCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;group&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setGranularity</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;monthly&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the full results of the analysis with the anomalies marked as &quot;True&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">anamoly_detector</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;timestamp&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;value&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;anomalies.isAnomaly&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="arbitrary-web-apis"></a>Arbitrary web APIs<a class="hash-link" href="#arbitrary-web-apis" title="Direct link to heading">#</a></h2><p>With HTTP on Spark, any web service can be used in your big data pipeline. In this example, we use the <a href="http://api.worldbank.org/v2/country/" target="_blank" rel="noopener noreferrer">World Bank API</a> to get information about various countries around the world.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:rgb(136, 132, 111)"># Use any requests from the python requests library</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(166, 226, 46)">world_bank_request</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">country</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> Request</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;GET&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;http://api.worldbank.org/v2/country/{}?format=json&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token builtin" style="color:rgb(174, 129, 255)">format</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">country</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Create a dataframe with spcificies which countries we want data on</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;br&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;usa&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;country&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">withColumn</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;request&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> http_udf</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">world_bank_request</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;country&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Much faster for big data because of the concurrency :)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">client </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">HTTPTransformer</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setConcurrency</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token number" style="color:rgb(174, 129, 255)">3</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setInputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;request&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;response&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Get the body of the response</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(166, 226, 46)">get_response_body</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">resp</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">entity</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:rgb(136, 132, 111)"># Show the details of the country data returned</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">display</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;country&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> udf</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">get_response_body</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">col</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;response&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">alias</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;response&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_1Ezv" id="azure-cognitive-search-sample"></a>Azure Cognitive search sample<a class="hash-link" href="#azure-cognitive-search-sample" title="Direct link to heading">#</a></h2><p>In this example, we show how you can enrich data using Cognitive Skills and write to an Azure Search Index using SynapseML.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB python"><pre tabindex="0" class="prism-code language-python codeBlock_1uaJ thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#f8f8f2"><span class="token plain">VISION_API_KEY </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;VISION_API_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">AZURE_SEARCH_KEY </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&#x27;AZURE_SEARCH_KEY&#x27;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">search_service </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;mmlspark-azure-search&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">search_index </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;test-33467690&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">createDataFrame</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;upload&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://mmlspark.blob.core.windows.net/datasets/DSIR/test1.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;upload&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;https://mmlspark.blob.core.windows.net/datasets/DSIR/test2.jpg&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                           </span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;searchAction&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">tdf </span><span class="token operator">=</span><span class="token plain"> AnalyzeImage</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setSubscriptionKey</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">VISION_API_KEY</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setLocation</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;eastus&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setImageUrlCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;url&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setOutputCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;analyzed&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setErrorCol</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;errors&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">setVisualFeatures</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token punctuation" style="color:rgb(249, 38, 114)">[</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Categories&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Tags&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Description&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Faces&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;ImageType&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Color&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;Adult&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">]</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;*&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;analyzed.*&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain">\</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">drop</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;errors&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(230, 219, 116)">&quot;analyzed&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">tdf</span><span class="token punctuation" style="color:rgb(249, 38, 114)">.</span><span class="token plain">writeToAzureSearch</span><span class="token punctuation" style="color:rgb(249, 38, 114)">(</span><span class="token plain">subscriptionKey</span><span class="token operator">=</span><span class="token plain">AZURE_SEARCH_KEY</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       actionCol</span><span class="token operator">=</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;searchAction&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       serviceName</span><span class="token operator">=</span><span class="token plain">search_service</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       indexName</span><span class="token operator">=</span><span class="token plain">search_index</span><span class="token punctuation" style="color:rgb(249, 38, 114)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                       keyCol</span><span class="token operator">=</span><span class="token string" style="color:rgb(230, 219, 116)">&quot;id&quot;</span><span class="token punctuation" style="color:rgb(249, 38, 114)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/SynapseML/docs/getting_started/first_model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« First Model</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/SynapseML/docs/features/http/about"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">About Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#usage" class="table-of-contents__link">Usage</a><ul><li><a href="#vision" class="table-of-contents__link">Vision</a></li><li><a href="#speech" class="table-of-contents__link">Speech</a></li><li><a href="#language" class="table-of-contents__link">Language</a></li><li><a href="#azure-form-recognizer" class="table-of-contents__link">Azure Form Recognizer</a></li><li><a href="#decision" class="table-of-contents__link">Decision</a></li><li><a href="#search" class="table-of-contents__link">Search</a></li></ul></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#shared-code" class="table-of-contents__link">Shared code</a></li><li><a href="#text-analytics-sample" class="table-of-contents__link">Text Analytics sample</a></li><li><a href="#translator-sample" class="table-of-contents__link">Translator sample</a></li><li><a href="#form-recognizer-sample" class="table-of-contents__link">Form Recognizer sample</a></li><li><a href="#computer-vision-sample" class="table-of-contents__link">Computer Vision sample</a></li><li><a href="#bing-image-search-sample" class="table-of-contents__link">Bing Image Search sample</a></li><li><a href="#speech-to-text-sample" class="table-of-contents__link">Speech-to-Text sample</a></li><li><a href="#anomaly-detector-sample" class="table-of-contents__link">Anomaly Detector sample</a></li><li><a href="#arbitrary-web-apis" class="table-of-contents__link">Arbitrary web APIs</a></li><li><a href="#azure-cognitive-search-sample" class="table-of-contents__link">Azure Cognitive search sample</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/SynapseML/docs/getting_started/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/SynapseML/docs/getting_started/first_example">Getting Started</a></li><li class="footer__item"><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/pyspark/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python API Reference</a></li><li class="footer__item"><a href="https://mmlspark.blob.core.windows.net/docs/0.9.1/scala/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scala API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/SynapseML/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/SynapseML/videos">Videos</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/SynapseML" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft.</div></div></div></footer></div>
<script src="/SynapseML/assets/js/runtime~main.dc74e8c4.js"></script>
<script src="/SynapseML/assets/js/main.1181f347.js"></script>
</body>
</html>